<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community - Student Community</title>
    <link rel="stylesheet" href="style.css">
    <style>
        table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 18px;
        text-align: left;
    }

    table, th, td {
        border: 1px solid #dddddd;
    }

    th, td {
        padding: 12px;
    }

    th {
        background-color: #f2f2f2;
    }

    .registration-list {
        margin-top: 20px;
    }
        header {
            background-color: #333;
            color: #fff;
            padding: 21px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .left-panel {
            background-color: #f4f4f4;
            padding: 20px;
            width: 250px;
            position: fixed;
            top: 70px; /* Height of the header */
            bottom: 0;
            overflow-y: auto;
            z-index: 900;
        }
        
        .main-content {
            margin-left: 270px; /* Width of the left panel + some margin */
            padding-top: 90px; /* Height of the header + some padding */
            padding-left: 20px;
            padding-right: 20px;
            flex-grow: 1;
        }
        
        #posts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Adjust min width as needed */
            gap: 20px; /* Adjust gap between posts */
        }
        
        .post {
            background-color: #fff;
            padding: 20px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
            height: 300px; /* Set a fixed height for all posts */
            overflow: hidden; /* Hide overflow content */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .post p {
            margin-bottom: 10px;
            flex-grow: 1; /* Allow paragraph to grow within the post */
        }
        
        .post img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: auto; /* Center image horizontally */
        }
        
        .posted-by {
            margin-top: 20px;
            text-align: center;
        }
        
        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
            position: absolute;
            bottom: 0;
            width: auto;
            margin-top: auto;
        }
        
        @media (max-width: 768px) {
            .left-panel {
                position: static;
                width: 100%;
                height: auto;
                padding-top: 20px;
            }
        
            .main-content {
                margin-left: 0;
                padding-top: 100px; /* Adjust for header */
            }
        }
        
        @media (max-width: 480px) {
            header, footer {
                padding: 10px;
            }
        
            .left-panel {
                padding: 10px;
            }
        
            .main-content {
                padding: 10px;
            }
        
            .post {
                padding: 10px;
            }
        }
        #logout-btn {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                }
    </style>
</head>

<body>
    <header>
        <div class="logo">
            <h1>Student Community</h1>
        </div>
        <nav>
            <ul>
                <li><span id="username-placeholder"></span></li>
                <div class="cta-buttons">
                    <li><a href="#" onclick="logout()" id="logout-btn">Logout</a></li>
                </div>
            </ul>
        </nav>
    </header>

    <div class="left-panel">
        <h2>Admin Options</h2>
        <ul>
            <li><a href="#" onclick="dashboard()">Dashboard</a></li>
            <li><a href="#" onclick="viewPosts()">View Posts</a></li>
            <li><a href="#" onclick="addEvent()">Add Event</a></li>
            <li><a href="#" onclick="viewRegistrations()">View Registrations</a></li>
        </ul>
    </div>

    <div class="main-content">
        <main class="login-container">
            <section id="event-management">
                <h2>Manage Events</h2>
                <form id="add-event-form">
                    <label for="event-name">Event Name:</label>
                    <input type="text" id="event-name" name="event-name" required>
                    
                    <label for="event-date">Event Date:</label>
                    <input type="date" id="event-date" name="event-date" required>
                    
                    <button type="submit">Add Event</button>
                </form>
                <div id="events-list">
                    <!-- Events will be listed here -->
                </div>
            </section>
        </main>
    </div>
        
    <footer>
        <p>&copy; 2024 Student Community</p>
    </footer>

    <script src="script.js"></script>
    <script>


        function logout() {
            // Redirect the user to the home page
            window.location.href = "index.html";
        }

        function dashboard() {
            // Redirect the user to the dashboard from where we can post 
            window.location.href = "admincommunities.html";
        }

        document.getElementById('add-event-form').addEventListener('submit', function(event) {
    event.preventDefault();
    var eventName = document.getElementById('event-name').value;
    var eventDate = document.getElementById('event-date').value;

    if (eventName && eventDate) {
        var events = JSON.parse(localStorage.getItem('events')) || [];
        events.push({ name: eventName, date: eventDate });
        localStorage.setItem('events', JSON.stringify(events));
        alert('Event added successfully!');
        displayEvents();

        // Clear the input fields after adding the event
        document.getElementById('event-name').value = '';
        document.getElementById('event-date').value = '';
    }
});

function displayEvents() {
    var events = JSON.parse(localStorage.getItem('events')) || [];
    var eventsList = document.getElementById('events-list');
    eventsList.innerHTML = ''; // Clear previous entries

    events.forEach(function(event, index) {
        var eventDiv = document.createElement('div');
        eventDiv.innerHTML = `<p>${event.name} - ${event.date}</p>
                              <button onclick="deleteEvent(${index})">Delete</button>`;
        eventsList.appendChild(eventDiv);
    });
}

function deleteEvent(index) {
    var events = JSON.parse(localStorage.getItem('events')) || [];
    events.splice(index, 1); // Remove the event at the specified index
    localStorage.setItem('events', JSON.stringify(events));
    displayEvents(); // Refresh the list of events
}

window.onload = function() {
    displayEvents(); // Display events when the page loads
};
function viewRegistrations() {
    var contentContainer = document.querySelector('.main-content');
    contentContainer.innerHTML = '';
    
    var heading = document.createElement('h2');
    heading.textContent = 'Registrations';
    contentContainer.appendChild(heading);
    
    var registrations = JSON.parse(localStorage.getItem("registrations")) || [];
    if (registrations.length === 0) {
        contentContainer.innerHTML += '<p>No registrations found.</p>';
    } else {
        var table = document.createElement('table');
        var thead = document.createElement('thead');
        var tbody = document.createElement('tbody');

        var headerRow = document.createElement('tr');
        var headers = ['Name', 'Roll Number', 'Sport'];
        headers.forEach(function(header) {
            var th = document.createElement('th');
            th.textContent = header;
            headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);

        registrations.forEach(function(registration) {
            var row = document.createElement('tr');

            var nameCell = document.createElement('td');
            nameCell.textContent = registration.name;
            row.appendChild(nameCell);

            var rollNoCell = document.createElement('td');
            rollNoCell.textContent = registration.rollNo;
            row.appendChild(rollNoCell);

            var sportCell = document.createElement('td');
            sportCell.textContent = registration.sport;
            row.appendChild(sportCell);

            tbody.appendChild(row);
        });

        table.appendChild(thead);
        table.appendChild(tbody);
        contentContainer.appendChild(table);

        // Add download button
        var downloadButton = document.createElement('button');
        downloadButton.textContent = 'Download Registrations';
        downloadButton.addEventListener('click', function() {
            downloadRegistrations(registrations);
        });
        contentContainer.appendChild(downloadButton);
    }
}

function downloadRegistrations(registrations) {
    var filename = 'registrations.csv';
    var csv = 'Name,Roll Number,Sport\n';
    registrations.forEach(function(registration) {
        csv += registration.name + ',' + registration.rollNo + ',' + registration.sport + '\n';
    });

    var blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    if (navigator.msSaveBlob) { // IE 10+
        navigator.msSaveBlob(blob, filename);
    } else {
        var link = document.createElement('a');
        if (link.download !== undefined) {
            var url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
}

    </script>
</body>
</html>

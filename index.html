<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Student Community</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">
            <h1>Student Community</h1>
        </div>
        <div class="cta-buttons">
            <a href="login.html" class="login-btn">Login</a>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>

    <main>
        <div class="banner-container">
            <div class="banner-slide">
                <div class="banner-item">
                    <a href="sports_registration.html"><img src="img1" alt="Banner 1" class="banner-img"></a>
                </div>
                
                <div class="banner-item">
                    <a href="registration.html"><img src="img2" alt="Banner 2" class="banner-img"></a>
                </div>
                <div class="banner-item">
                    <a href="registration.html"><img src="photo" alt="Banner 3" class="banner-img"></a>
                </div>
            </div>
        </div>
        <div class="banner-dots">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
        </div>
    </main>

    <!-- Display posts from communities -->
    <section id="posts-section">
        <h2>Latest Posts</h2>
        <div id="posts-container">
            <!-- Posts will be dynamically added here -->
        </div>
    </section>

    <footer>
        <p>&copy; 2024 Student Community</p>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="script.js"></script>
    <script>
        window.onload = function() {
            displayBanner();
            displayPosts();
        };

        function displayBanner() {
            var bannerUrl = localStorage.getItem("indexPageBanner");
            if (bannerUrl) {
                var bannerContainer = document.querySelector(".banner-container");
                bannerContainer.innerHTML = ''; // Clear existing content
                var bannerElement = document.createElement("img");
                bannerElement.src = bannerUrl;
                bannerContainer.appendChild(bannerElement);
            }
        }

        // Function to display both admin and student posts
        function displayPosts() {
            var adminPosts = JSON.parse(localStorage.getItem("adminPosts")) || [];
            var studentPosts = JSON.parse(localStorage.getItem("studentPosts")) || [];
            var allPosts = adminPosts.concat(studentPosts);

            var postsContainer = document.getElementById("posts-container");
            allPosts.forEach(function(post) {
                displayPost(post);
            });
        }

        // Function to display a post
        function displayPost(post) {
            var postsContainer = document.getElementById("posts-container");
            var postElement = document.createElement("div");
            postElement.classList.add("post");

            // Add post content (caption)
            var postContentElement = document.createElement("p");
            postContentElement.textContent = post.content;
            postElement.appendChild(postContentElement);

            // Check if the post contains an image
            if (post.image) {
                var postImageElement = document.createElement("img");
                postImageElement.src = post.image;
                postImageElement.classList.add("post-image");
                postElement.appendChild(postImageElement);
            }

            // Add email or username
            var postUserElement = document.createElement("p");
            postUserElement.textContent = "Posted by: " + (post.email || post.username);
            postElement.appendChild(postUserElement);

            postsContainer.insertBefore(postElement, postsContainer.firstChild);
        }

        // Banner slide functionality
        let slideIndex = 0;
        showSlides();

        function showSlides() {
            let slides = document.querySelectorAll('.banner-item');
            let dots = document.querySelectorAll('.dot');

            for (let i = 0; i < slides.length; i++) {
                slides[i].style.display = 'none';
                dots[i].classList.remove('active');
            }

            slideIndex++;
            if (slideIndex > slides.length) { slideIndex = 1 }

            slides[slideIndex - 1].style.display = 'block';
            dots[slideIndex - 1].classList.add('active');

            setTimeout(showSlides, 10000); // Change image every 3 seconds
        }

        // Function to navigate to a specific slide
        function currentSlide(n) {
            showSlides();
            slideIndex = n;
        }
    </script>
</body>
</html>
